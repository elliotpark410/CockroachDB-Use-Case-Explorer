generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
}

model Prospect {
  id               String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt
  contactName      String?
  email            String?
  companyName      String?
  industry         String?
  role             String?
  dataWorkloadType DataWorkload
  cloudProvider    CloudProvider
  techStack        TechStack[]
  dataVolume       String?
  isNewApp         Boolean?
  keyFeatures      Features[]
  queryLatency     Int
  additionalNotes  String?
  timeline         String
  result           Result?
}

model CustomerStory {
  id            String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  companyName   String         @unique
  industry      String
  cloudProvider CloudProvider?
  techStack     TechStack[]
  useCase       String?
  challenge     String?
  solution      String?
  keyFeatures   Features[]
  results       Result[]
}

model Result {
  id               String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  prospectId       String         @unique @db.Uuid
  score            Int?
  relevantCustomer String?
  customerStory    CustomerStory? @relation(fields: [relevantCustomer], references: [companyName])
  prospect         Prospect       @relation(fields: [prospectId], references: [id])
}

enum DataWorkload {
  TRANSACTIONAL
  ANALYTICAL
  HYBRID
  OTHER
}

enum CloudProvider {
  AWS
  GCP
  AZURE
  MULTI_CLOUD
  ON_PREMISE
  HYBRID
  OTHER
}

enum TechStack {
  MYSQL
  POSTGRES
  ORACLE
  SQL_SERVER
  MARIA_DB
  AURORA
  DYNAMO_DB
  SPANNER
  TERADATA
  COUCHBASE
  MONGO_DB
  IBM_DB2
  CASSANDRA
  ELASTICSEARCH
  REDIS
  KAFKA
  KUBERNETES
  DOCKER
  OTHER
  NA
}

enum Features {
  SCALABILITY
  CONSISTENCY
  MULTI_REGION
  DATA_LOCALITY
  DATA_COMPLIANCE
  HIGH_AVAILABILITY
  FAULT_TOLERANCE
  PERFORMANCE
  MULTI_CLOUD
}
